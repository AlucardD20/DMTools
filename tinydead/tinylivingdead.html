<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tiny Living Dead Survivor Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      min-height: 100vh;
      background: #23231f url('https://raw.githubusercontent.com/AlucardD20/DMTools/main/images/city.png') no-repeat center center fixed;
      background-size: cover;
      color: #ece8dd;
      font-family: Georgia, serif;
      text-align: center;
      margin: 0;
      padding: 0;
      position: relative;
      overflow-x: hidden;
    }
    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(20,20,18,0.76);
      pointer-events: none;
      z-index: 0;
    }
    .container {
      position: relative;
      z-index: 2;
      background: rgba(30,32,28,0.97);
      max-width: 650px;
      margin: 40px auto 20px auto;
      border-radius: 10px;
      padding: 24px 18px;
      box-shadow: 0 0 16px 2px #181815c0;
      border: 2px solid #3b3930;
    }
    h1 {
      font-size: 1.9em;
      color: #bfa96d;
      letter-spacing: 1px;
      margin-bottom: 0.3em;
      text-shadow: 1px 1px 4px #0008;
    }
    button {
      background: #3b3930;
      color: #ece8dd;
      border: 1.5px solid #bfa96d;
      border-radius: 4px;
      font-size: 1em;
      padding: 7px 18px;
      margin: 5px;
      font-weight: bold;
      letter-spacing: 1px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    button:hover {
      background: #bfa96d;
      color: #23231f;
    }
    .output {
      background: rgba(41, 40, 34, 0.93);
      border-radius: 8px;
      border: 1.5px solid #bfa96d;
      box-shadow: 0 0 8px #0006;
      margin-top: 22px;
      text-align: left;
      padding: 14px 18px;
      font-size: 1.05em;
    }
    ul {
      margin: 0.1em 0 0.5em 1.3em;
      padding: 0;
    }
    .section {
      margin-bottom: 10px;
    }
    strong { color: #f2df9c; }
    input, select {
      font-size: 1em;
      margin: 2px 0 8px 0;
      border-radius: 3px;
      border: 1px solid #bfa96d;
      background: #39382e;
      color: #ece8dd;
      padding: 2px 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Tiny Living Dead Survivor Generator</h1>
    <button onclick="location.href='/'" style="margin-bottom:10px;">Home</button>
    <button onclick="generateSurvivor()">Generate Survivor</button>
    <button onclick="downloadSurvivor()">Download as TXT</button>
    <div class="output" id="output"></div>
  </div>

  <!-- Static Footer -->
  <footer style="display:flex;align-items:center;justify-content:center;padding:10px;background-color:#1e1e1e;color:#f5f5f5;font-size:14px;text-align:center;">
      <span>© 2025 SoloDND.com | All generators inspired by a needed basis for my games</span>
      <div style="margin-left:10px;">
          <a href="https://patreon.com/TheEvilDM" target="_blank">
              <img src="https://raw.githubusercontent.com/AlucardD20/DMTools/main/images/Patreon-Logo.png" alt="Support me on Patreon" style="height:24px;">
          </a>
      </div>
  </footer>

  <script>
    // Simple lists for names and backgrounds
    const maleNames = ["Jack","Frank","Riley","Miguel","Caleb","Owen","Harold","Jace","Carter","Lucas"];
    const femaleNames = ["Sarah","Jill","Emily","Grace","Kim","Violet","Lynn","Daisy","Hannah","Morgan"];
    const lastNames = ["Mason","Fisher","Lee","West","Hall","Martinez","Nguyen","Taylor","Price","Khan"];
    const trades = [
      "Mechanic","Teacher","EMT","Police Officer","Farmer","Cook","Librarian","Construction Worker",
      "Journalist","Engineer","Musician","Delivery Driver","Nurse","Veteran","Truck Driver"
    ];
    const beliefs = [
      "I’ll always find a diplomatic solution.",
      "Money can buy happiness.",
      "I let my fists do the talking.",
      "No one gets left behind.",
      "Nothing matters except survival.",
      "The strong must protect the weak.",
      "I trust my instincts, not the crowd.",
      "Family is everything.",
      "The ends justify the means.",
      "I fight so others don’t have to."
    ];
    const weaknesses = [
      "Fear of the dark", "Compulsive honesty", "Trusts too easily", "Short temper", "Haunted by guilt", "Addiction (nicotine)", "Asthma", "Claustrophobic", "Nightmares", "Grief over lost loved ones"
    ];

    // Trait List from p.20–21 of the rules
    const traits = [
      "Acrobat: Advantage on acrobatics, jumping, climbing, balance.",
      "Armor Master: +3 Armor HP (must repair, not heal).",
      "Barfighter: Proficient with Improvised Weapons (no Mastered weapon).",
      "Berserker: Melee attack with Disadvantage for +1 damage.",
      "Born Fighter: Take a full Turn before initiative is rolled.",
      "Brawler: Unarmed Evade 2d6 (not 1d6).",
      "Charismatic: Advantage to influence or convince.",
      "Chemist: Mix medicine/elixirs/poisons, advantage to ID liquids.",
      "Cleave: Drop enemy to 0 HP, extra attack with Disadvantage.",
      "Dark-fighter: Ignore sight impairment penalties.",
      "Detective: Advantage searching for clues, motives, etc.",
      "Diehard: Once/day, drop to 1 HP instead of 0.",
      "Doctor: Heal others 2 HP with Test; cure poison/disease.",
      "Educated: Advantage to know info.",
      "Eidetic Memory: Recall info on 4,5,6.",
      "Familiar: Spirit companion (needs GM approval/magic rules).",
      "Fleet of Foot: Move 30ft instead of 25ft per action.",
      "Insightful: Advantage to detect lies.",
      "Lucky: Reroll 1 Test per session.",
      "Marksman: Focused Ranged attack succeeds on 3–6.",
      "Martial Artist: Proficient Unarmed, reroll 1 Unarmed fail/day.",
      "Nimble Fingers: Advantage picking locks, sleight-of-hand, theft.",
      "Opportunist: Enemy misses, counter-attack with Disadvantage.",
      "Perceptive: Advantage to notice/find info (even asleep).",
      "Quick Shot: Reload + fire Ranged weapon in one Action.",
      "Resolute: Advantage on all Save Tests.",
      "Shield Bearer: Shield: Evade 2d6. Start with shield.",
      "Sneaky: Advantage to hide or sneak.",
      "Strong: Advantage brute force.",
      "Survivalist: Advantage to forage, find water/shelter.",
      "Tough: +2 Hit Points.",
      "Tracker: Advantage to track, always find North outdoors.",
      "Trapmaster: Advantage with traps, Save vs traps.",
      "Vigilant: Advantage on Initiative."
    ];
    // Weapon Groups and examples
    const weaponGroups = {
      "Light Melee": ["Knife","Crowbar","Hatchet","Machete","Baseball Bat"],
      "Heavy Melee": ["Sledgehammer","Fire Axe","Chainsaw","Rebar","Shovel"],
      "Ranged": ["Pistol","Rifle","Shotgun","Bow","Crossbow"]
    };

    // Utility
    function rand(arr) { return arr[Math.floor(Math.random()*arr.length)]; }

    // Main generator
    function generateSurvivor() {
      const isMale = Math.random() < 0.5;
      const firstName = rand(isMale ? maleNames : femaleNames);
      const lastName = rand(lastNames);
      const name = firstName + " " + lastName;
      const sex = isMale ? "Male" : "Female";
      const age = Math.floor(Math.random()*35)+16; // 16–50
      const hpBase = 6;

      // Traits: unique, random 3
      let traitIdxs = [];
      while(traitIdxs.length<3){
        let idx = Math.floor(Math.random()*traits.length);
        if(!traitIdxs.includes(idx)) traitIdxs.push(idx);
      }
      let selectedTraits = traitIdxs.map(idx => traits[idx]);

      // Add HP if Tough or Armor Master is chosen
      let hp = hpBase;
      if (selectedTraits.some(t=>t.startsWith("Tough:"))) hp += 2;
      if (selectedTraits.some(t=>t.startsWith("Armor Master:"))) hp += 3;

      // Weapon group, then mastered weapon
      let weaponGroupNames = Object.keys(weaponGroups);
      // Allow Barfighter and Martial Artist to pick special groups
      if (selectedTraits.some(t=>t.startsWith("Barfighter:"))) weaponGroupNames.push("Improvised");
      if (selectedTraits.some(t=>t.startsWith("Martial Artist:"))) weaponGroupNames.push("Unarmed");
      let group = rand(weaponGroupNames);
      let masteredWeapon;
      if (group==="Improvised") masteredWeapon = "Your choice (Chair, Pipe, Bottle, etc.)";
      else if (group==="Unarmed") masteredWeapon = "Fist, Kick, Headbutt, etc.";
      else masteredWeapon = rand(weaponGroups[group]);

      // Weakness
      let weakness = rand(weaknesses);

      // Family Trade / Belief
      let trade = rand(trades);
      let belief = rand(beliefs);

      // Output formatting
      let output = `
        <div class="section"><strong>Name:</strong> ${name}</div>
        <div class="section"><strong>Sex:</strong> ${sex} &nbsp; <strong>Age:</strong> ${age}</div>
        <div class="section"><strong>Hit Points:</strong> ${hp}</div>
        <div class="section"><strong>Traits:</strong>
          <ul>${selectedTraits.map(trait=>`<li>${trait}</li>`).join('')}</ul>
        </div>
        <div class="section"><strong>Weapon Group Proficient:</strong> ${group}</div>
        <div class="section"><strong>Mastered Weapon:</strong> ${masteredWeapon}</div>
        <div class="section"><strong>Family Trade:</strong> ${trade}</div>
        <div class="section"><strong>Belief:</strong> "${belief}"</div>
        <div class="section"><strong>Weakness:</strong> ${weakness}</div>
        <div class="section"><strong>Starting Gear:</strong> Outfit, personal gear, 1 ${masteredWeapon} (${group})${selectedTraits.some(t=>t.startsWith("Shield Bearer:")) ? ", shield" : ""}, backpack. Any extra equipment based on traits.</div>
      `;
      document.getElementById('output').innerHTML = output;
    }

    // Download as TXT
    function downloadSurvivor() {
      const output = document.getElementById('output').innerText;
      const blob = new Blob([output], {type: "text/plain"});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = "TinyLivingDead_Survivor.txt";
      link.click();
    }
  </script>
</body>
</html>
